package manager.data.extraction;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import manager.data.model.Country;
import manager.data.model.CountryWikipedia;

public class WikipediaCountryWrapper {

	public WikipediaCountryWrapper() {
		// TODO Auto-generated constructor stub
	}
	
	public CountryWikipedia extractData(Country toSearch) throws IOException
	{
		String urlBaseCountry = "https://en.wikipedia.org/wiki/";
		String urlBaseWikipedia = "https://en.wikipedia.org/";
		String imageURL = "";
		String description = "";
//		Document doc = Jsoup.connect(urlBaseCountry + "Italy").get();
		Document doc = Jsoup.connect(urlBaseCountry + parseCountry(toSearch.getName())).get();
		Element content = doc.getElementById("content");
		Element countryTable = content.getElementsByClass("infobox geography vcard").get(0);
		Elements images = countryTable.select("a.image");
		int i = 0;
		while (imageURL.isEmpty() && i < images.size())
		{
			Element e = images.get(i);
//			System.out.println(e.attr("p")); //If the element e haven't the attribute p, print the empty string
			if (e.attr("title").contains("Location") || e.attr("href").contains("projection") || e.attr("href").contains("orthographic"))
			{
				Document d = Jsoup.connect(urlBaseWikipedia + e.attr("href")).get();
				imageURL = d.getElementById("file").getElementsByTag("a").get(0).attr("href");
			}
			i++;
		}
//		System.out.println(imageURL);
		boolean descriptionFound = false;
		Element elementDescription = countryTable.nextElementSibling();
		while (!descriptionFound)
		{
//			System.out.println("Hey");
			if (elementDescription.tagName().equals("p"))
			{
//				System.out.println("Found");
				descriptionFound = true;
			}
			else
			{
//				System.out.println("Not Found");
				elementDescription = elementDescription.nextElementSibling();
			}
		}
		while (elementDescription.tagName().equals("p"))
		{
			description = description + elementDescription.text();
			elementDescription = elementDescription.nextElementSibling();
		}
//		System.out.println(description);
		description = cleanDescription(description);
//		System.out.println(description);
		return new CountryWikipedia(toSearch.getCode(), toSearch.getName(), imageURL, description);
//		return null;
	}
	
	private String parseCountry(String country)
	{
		return country.replace(' ', '_');
	}
	
	private String cleanDescription(String description)
	{
		String cleandDescription = new String(description.getBytes());
		cleandDescription = cleandDescription.replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", "").replaceAll("\\[[^\\[\\]]+\\]", "");
		return cleandDescription;
	}
	
//	private String testCleanDescription(String description)
//	{
////		String clearDescription = "";
////		String d = new String(description);
//		String d = new String(description.getBytes());
//		String cleanDescription = description/*.replaceAll("\\[[0-9]+\\]", "")*/.replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", "");
//		System.out.println(cleanDescription);
////		description = description.trim().replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", "");
////		System.out.println(clearDescription);
//		System.out.println(description.length());
//		System.out.println("Italy (Italian: Italia [i?ta?lja] ( listen)), officially the Italian Republic (Italian: Repubblica Italiana [re?pubblika ita?lja?na]),[10][11][12][13] is a sovereign state in Europe. Located in the heart of the Mediterranean Sea, Italy shares open land borders with France, Switzerland, Austria, Slovenia, San Marino and Vatican City. Italy covers an area of 301,340 km2 (116,350 sq mi) and has a largely temperate seasonal and Mediterranean climate. With around 61 million inhabitants, it is the fourth-most populous EU member state and the most populous in southern Europe.Due to its central geographic location in Europe and the Mediterranean, Italy has historically been home to a myriad of peoples and cultures. In addition to the various ancient Italian tribes and Italic peoples dispersed throughout the Italian Peninsula and insular Italy, beginning from the classical era, Phoenicians, Carthaginians and Greeks established settlements in the south of Italy, with Etruscans and Celts inhabiting the centre and the north of Italy respectively. The Italic tribe known as the Latins formed the Roman Kingdom in the 8th century BC, which eventually became a republic that conquered and assimilated its neighbours. In the first century BC, the Roman Empire emerged as the dominant power in the Mediterranean Basin and became the leading cultural, political and religious centre of Western civilisation. The legacy of the Roman Empire is widespread and can be observed in the global distribution of civilian law, republican governments, Christianity and the Latin script.During the Early Middle Ages, Italy endured sociopolitical collapse and barbarian invasions, but by the 11th century, numerous rival city-states and maritime republics, mainly in the northern and central regions of Italy, rose to great prosperity through shipping, commerce and banking, laying the groundwork for modern capitalism.[14] These mostly independent statelets served as Europe's main trading hubs with Asia and the Near East, often enjoying a greater degree of democracy than the larger feudal monarchies that were consolidating throughout Europe; however, part of central Italy was under the control of the theocratic Papal States, while Southern Italy remained largely feudal until the 19th century, partially as a result of a succession of Byzantine, Arab, Norman, Angevin and Spanish conquests of the region.[15]The Renaissance began in Italy and spread to the rest of Europe, bringing a renewed interest in humanism, science, exploration and art. Italian culture flourished, producing famous scholars, artists and polymaths such as Michelangelo, Leonardo da Vinci, Raphael, Galileo and Machiavelli. During the Middle Ages, Italian explorers such as Marco Polo, Christopher Columbus, Amerigo Vespucci, John Cabot and Giovanni da Verrazzano discovered new routes to the Far East and the New World, helping to usher in the European Age of Discovery. Nevertheless, Italy's commercial and political power significantly waned with the opening of trade routes that bypassed the Mediterranean.[15][16][17] Centuries of infighting between the Italian city-states, such the Italian Wars of the 15th and 16th centuries, left the region fragmented and susceptible to conquest by European powers such as France, Spain and Austria.By the mid-19th century, rising Italian nationalism and calls for independence from foreign control led to a period of revolutionary political upheaval. After centuries of foreign domination and political division, Italy was almost entirely unified in 1871, establishing the Kingdom of Italy as a great power.[18] From the late 19th century to the early 20th century, Italy rapidly industrialised, namely in the north, and acquired a colonial empire,[19] while the south remained largely impoverished and excluded from industrialisation, fuelling a large and influential diaspora.[20] Despite being one of the main victors in World War I, Italy entered a period of economic crisis and social turmoil, leading to the rise of a fascist dictatorship in 1922. Participation in World War II on the Axis side ended in military defeat, economic destruction and the Italian Civil War. Following the liberation of Italy and the rise of the resistance, the country abolished the monarchy, reinstated democracy, enjoyed a prolonged economic boom and, despite periods of sociopolitical turmoil, became a major advanced country.[21][22][23]Today, Italy is considered to be one of the world's most culturally and economically developed countries, with the Italian economy ranking eighth largest in the world and third in the Eurozone. As an advanced economy, the country has the sixth-largest worldwide national wealth, and it is ranked third for its central bank gold reserve. Italy has a very high level of human development, and it stands among the top countries for life expectancy. The country plays a prominent role in regional and global economic, military, cultural and diplomatic affairs, and it is both a regional power[24][25] and a great power.[26][27] Italy is a founding and leading member of the European Union and a member of numerous international institutions, including the UN, NATO, the OECD, the OSCE, the WTO, the G7, the G20, the Union for the Mediterranean, the Council of Europe, Uniting for Consensus, the Schengen Area and many more. As a reflection of its cultural wealth, Italy is home to 54 World Heritage Sites, the most in the world, and is the fifth-most visited country.".length());
//		System.out.println(description.equals("Italy (Italian: Italia [i?ta?lja] ( listen)), officially the Italian Republic (Italian: Repubblica Italiana [re?pubblika ita?lja?na]),[10][11][12][13] is a sovereign state in Europe. Located in the heart of the Mediterranean Sea, Italy shares open land borders with France, Switzerland, Austria, Slovenia, San Marino and Vatican City. Italy covers an area of 301,340 km2 (116,350 sq mi) and has a largely temperate seasonal and Mediterranean climate. With around 61 million inhabitants, it is the fourth-most populous EU member state and the most populous in southern Europe.Due to its central geographic location in Europe and the Mediterranean, Italy has historically been home to a myriad of peoples and cultures. In addition to the various ancient Italian tribes and Italic peoples dispersed throughout the Italian Peninsula and insular Italy, beginning from the classical era, Phoenicians, Carthaginians and Greeks established settlements in the south of Italy, with Etruscans and Celts inhabiting the centre and the north of Italy respectively. The Italic tribe known as the Latins formed the Roman Kingdom in the 8th century BC, which eventually became a republic that conquered and assimilated its neighbours. In the first century BC, the Roman Empire emerged as the dominant power in the Mediterranean Basin and became the leading cultural, political and religious centre of Western civilisation. The legacy of the Roman Empire is widespread and can be observed in the global distribution of civilian law, republican governments, Christianity and the Latin script.During the Early Middle Ages, Italy endured sociopolitical collapse and barbarian invasions, but by the 11th century, numerous rival city-states and maritime republics, mainly in the northern and central regions of Italy, rose to great prosperity through shipping, commerce and banking, laying the groundwork for modern capitalism.[14] These mostly independent statelets served as Europe's main trading hubs with Asia and the Near East, often enjoying a greater degree of democracy than the larger feudal monarchies that were consolidating throughout Europe; however, part of central Italy was under the control of the theocratic Papal States, while Southern Italy remained largely feudal until the 19th century, partially as a result of a succession of Byzantine, Arab, Norman, Angevin and Spanish conquests of the region.[15]The Renaissance began in Italy and spread to the rest of Europe, bringing a renewed interest in humanism, science, exploration and art. Italian culture flourished, producing famous scholars, artists and polymaths such as Michelangelo, Leonardo da Vinci, Raphael, Galileo and Machiavelli. During the Middle Ages, Italian explorers such as Marco Polo, Christopher Columbus, Amerigo Vespucci, John Cabot and Giovanni da Verrazzano discovered new routes to the Far East and the New World, helping to usher in the European Age of Discovery. Nevertheless, Italy's commercial and political power significantly waned with the opening of trade routes that bypassed the Mediterranean.[15][16][17] Centuries of infighting between the Italian city-states, such the Italian Wars of the 15th and 16th centuries, left the region fragmented and susceptible to conquest by European powers such as France, Spain and Austria.By the mid-19th century, rising Italian nationalism and calls for independence from foreign control led to a period of revolutionary political upheaval. After centuries of foreign domination and political division, Italy was almost entirely unified in 1871, establishing the Kingdom of Italy as a great power.[18] From the late 19th century to the early 20th century, Italy rapidly industrialised, namely in the north, and acquired a colonial empire,[19] while the south remained largely impoverished and excluded from industrialisation, fuelling a large and influential diaspora.[20] Despite being one of the main victors in World War I, Italy entered a period of economic crisis and social turmoil, leading to the rise of a fascist dictatorship in 1922. Participation in World War II on the Axis side ended in military defeat, economic destruction and the Italian Civil War. Following the liberation of Italy and the rise of the resistance, the country abolished the monarchy, reinstated democracy, enjoyed a prolonged economic boom and, despite periods of sociopolitical turmoil, became a major advanced country.[21][22][23]Today, Italy is considered to be one of the world's most culturally and economically developed countries, with the Italian economy ranking eighth largest in the world and third in the Eurozone. As an advanced economy, the country has the sixth-largest worldwide national wealth, and it is ranked third for its central bank gold reserve. Italy has a very high level of human development, and it stands among the top countries for life expectancy. The country plays a prominent role in regional and global economic, military, cultural and diplomatic affairs, and it is both a regional power[24][25] and a great power.[26][27] Italy is a founding and leading member of the European Union and a member of numerous international institutions, including the UN, NATO, the OECD, the OSCE, the WTO, the G7, the G20, the Union for the Mediterranean, the Council of Europe, Uniting for Consensus, the Schengen Area and many more. As a reflection of its cultural wealth, Italy is home to 54 World Heritage Sites, the most in the world, and is the fifth-most visited country."));
////		String d = description.intern();
////		d = d.replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", "");
//		System.out.println("HI: " + d);
//		System.out.println(d.equals("Italy (Italian: Italia [i?ta?lja] ( listen)), officially the Italian Republic (Italian: Repubblica Italiana [re?pubblika ita?lja?na]),[10][11][12][13] is a sovereign state in Europe. Located in the heart of the Mediterranean Sea, Italy shares open land borders with France, Switzerland, Austria, Slovenia, San Marino and Vatican City. Italy covers an area of 301,340 km2 (116,350 sq mi) and has a largely temperate seasonal and Mediterranean climate. With around 61 million inhabitants, it is the fourth-most populous EU member state and the most populous in southern Europe.Due to its central geographic location in Europe and the Mediterranean, Italy has historically been home to a myriad of peoples and cultures. In addition to the various ancient Italian tribes and Italic peoples dispersed throughout the Italian Peninsula and insular Italy, beginning from the classical era, Phoenicians, Carthaginians and Greeks established settlements in the south of Italy, with Etruscans and Celts inhabiting the centre and the north of Italy respectively. The Italic tribe known as the Latins formed the Roman Kingdom in the 8th century BC, which eventually became a republic that conquered and assimilated its neighbours. In the first century BC, the Roman Empire emerged as the dominant power in the Mediterranean Basin and became the leading cultural, political and religious centre of Western civilisation. The legacy of the Roman Empire is widespread and can be observed in the global distribution of civilian law, republican governments, Christianity and the Latin script.During the Early Middle Ages, Italy endured sociopolitical collapse and barbarian invasions, but by the 11th century, numerous rival city-states and maritime republics, mainly in the northern and central regions of Italy, rose to great prosperity through shipping, commerce and banking, laying the groundwork for modern capitalism.[14] These mostly independent statelets served as Europe's main trading hubs with Asia and the Near East, often enjoying a greater degree of democracy than the larger feudal monarchies that were consolidating throughout Europe; however, part of central Italy was under the control of the theocratic Papal States, while Southern Italy remained largely feudal until the 19th century, partially as a result of a succession of Byzantine, Arab, Norman, Angevin and Spanish conquests of the region.[15]The Renaissance began in Italy and spread to the rest of Europe, bringing a renewed interest in humanism, science, exploration and art. Italian culture flourished, producing famous scholars, artists and polymaths such as Michelangelo, Leonardo da Vinci, Raphael, Galileo and Machiavelli. During the Middle Ages, Italian explorers such as Marco Polo, Christopher Columbus, Amerigo Vespucci, John Cabot and Giovanni da Verrazzano discovered new routes to the Far East and the New World, helping to usher in the European Age of Discovery. Nevertheless, Italy's commercial and political power significantly waned with the opening of trade routes that bypassed the Mediterranean.[15][16][17] Centuries of infighting between the Italian city-states, such the Italian Wars of the 15th and 16th centuries, left the region fragmented and susceptible to conquest by European powers such as France, Spain and Austria.By the mid-19th century, rising Italian nationalism and calls for independence from foreign control led to a period of revolutionary political upheaval. After centuries of foreign domination and political division, Italy was almost entirely unified in 1871, establishing the Kingdom of Italy as a great power.[18] From the late 19th century to the early 20th century, Italy rapidly industrialised, namely in the north, and acquired a colonial empire,[19] while the south remained largely impoverished and excluded from industrialisation, fuelling a large and influential diaspora.[20] Despite being one of the main victors in World War I, Italy entered a period of economic crisis and social turmoil, leading to the rise of a fascist dictatorship in 1922. Participation in World War II on the Axis side ended in military defeat, economic destruction and the Italian Civil War. Following the liberation of Italy and the rise of the resistance, the country abolished the monarchy, reinstated democracy, enjoyed a prolonged economic boom and, despite periods of sociopolitical turmoil, became a major advanced country.[21][22][23]Today, Italy is considered to be one of the world's most culturally and economically developed countries, with the Italian economy ranking eighth largest in the world and third in the Eurozone. As an advanced economy, the country has the sixth-largest worldwide national wealth, and it is ranked third for its central bank gold reserve. Italy has a very high level of human development, and it stands among the top countries for life expectancy. The country plays a prominent role in regional and global economic, military, cultural and diplomatic affairs, and it is both a regional power[24][25] and a great power.[26][27] Italy is a founding and leading member of the European Union and a member of numerous international institutions, including the UN, NATO, the OECD, the OSCE, the WTO, the G7, the G20, the Union for the Mediterranean, the Council of Europe, Uniting for Consensus, the Schengen Area and many more. As a reflection of its cultural wealth, Italy is home to 54 World Heritage Sites, the most in the world, and is the fifth-most visited country."));
//		System.out.println(d.replaceAll("\\[[0-9]+\\]", "").replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", ""));
////		System.out.println(description.replaceAll("\\[[0-9]+\\]", "").getClass().getName());
////		System.out.println("Italy (Italian: Italia [i?ta?lja] ( listen)), officially the Italian Republic (Italian: Repubblica Italiana [re?pubblika ita?lja?na]), is a sovereign state in Europe. Located in the heart of the Mediterranean Sea, Italy shares open land borders with France, Switzerland, Austria, Slovenia, San Marino and Vatican City. Italy covers an area of 301,340 km2 (116,350 sq mi) and has a largely temperate seasonal and Mediterranean climate. With around 61 million inhabitants, it is the fourth-most populous EU member state and the most populous in southern Europe.Due to its central geographic location in Europe and the Mediterranean, Italy has historically been home to a myriad of peoples and cultures. In addition to the various ancient Italian tribes and Italic peoples dispersed throughout the Italian Peninsula and insular Italy, beginning from the classical era, Phoenicians, Carthaginians and Greeks established settlements in the south of Italy, with Etruscans and Celts inhabiting the centre and the north of Italy respectively. The Italic tribe known as the Latins formed the Roman Kingdom in the 8th century BC, which eventually became a republic that conquered and assimilated its neighbours. In the first century BC, the Roman Empire emerged as the dominant power in the Mediterranean Basin and became the leading cultural, political and religious centre of Western civilisation. The legacy of the Roman Empire is widespread and can be observed in the global distribution of civilian law, republican governments, Christianity and the Latin script.During the Early Middle Ages, Italy endured sociopolitical collapse and barbarian invasions, but by the 11th century, numerous rival city-states and maritime republics, mainly in the northern and central regions of Italy, rose to great prosperity through shipping, commerce and banking, laying the groundwork for modern capitalism. These mostly independent statelets served as Europe's main trading hubs with Asia and the Near East, often enjoying a greater degree of democracy than the larger feudal monarchies that were consolidating throughout Europe; however, part of central Italy was under the control of the theocratic Papal States, while Southern Italy remained largely feudal until the 19th century, partially as a result of a succession of Byzantine, Arab, Norman, Angevin and Spanish conquests of the region.The Renaissance began in Italy and spread to the rest of Europe, bringing a renewed interest in humanism, science, exploration and art. Italian culture flourished, producing famous scholars, artists and polymaths such as Michelangelo, Leonardo da Vinci, Raphael, Galileo and Machiavelli. During the Middle Ages, Italian explorers such as Marco Polo, Christopher Columbus, Amerigo Vespucci, John Cabot and Giovanni da Verrazzano discovered new routes to the Far East and the New World, helping to usher in the European Age of Discovery. Nevertheless, Italy's commercial and political power significantly waned with the opening of trade routes that bypassed the Mediterranean. Centuries of infighting between the Italian city-states, such the Italian Wars of the 15th and 16th centuries, left the region fragmented and susceptible to conquest by European powers such as France, Spain and Austria.By the mid-19th century, rising Italian nationalism and calls for independence from foreign control led to a period of revolutionary political upheaval. After centuries of foreign domination and political division, Italy was almost entirely unified in 1871, establishing the Kingdom of Italy as a great power. From the late 19th century to the early 20th century, Italy rapidly industrialised, namely in the north, and acquired a colonial empire, while the south remained largely impoverished and excluded from industrialisation, fuelling a large and influential diaspora. Despite being one of the main victors in World War I, Italy entered a period of economic crisis and social turmoil, leading to the rise of a fascist dictatorship in 1922. Participation in World War II on the Axis side ended in military defeat, economic destruction and the Italian Civil War. Following the liberation of Italy and the rise of the resistance, the country abolished the monarchy, reinstated democracy, enjoyed a prolonged economic boom and, despite periods of sociopolitical turmoil, became a major advanced country.Today, Italy is considered to be one of the world's most culturally and economically developed countries, with the Italian economy ranking eighth largest in the world and third in the Eurozone. As an advanced economy, the country has the sixth-largest worldwide national wealth, and it is ranked third for its central bank gold reserve. Italy has a very high level of human development, and it stands among the top countries for life expectancy. The country plays a prominent role in regional and global economic, military, cultural and diplomatic affairs, and it is both a regional power and a great power. Italy is a founding and leading member of the European Union and a member of numerous international institutions, including the UN, NATO, the OECD, the OSCE, the WTO, the G7, the G20, the Union for the Mediterranean, the Council of Europe, Uniting for Consensus, the Schengen Area and many more. As a reflection of its cultural wealth, Italy is home to 54 World Heritage Sites, the most in the world, and is the fifth-most visited country.".getClass().getName());
//		
////		clearDescription = Pattern.compile("\\[[0-9]+\\]").matcher(description).replaceAll("");
////		String s = Pattern.compile("\\(.*\\?+").matcher(clearDescription).replaceAll("\n");
//		
////		String s = clearDescription.replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", "");
////		System.out.println(s);
//		
////		Pattern p = Pattern.compile("\\([^\\)]*\\?+[^\\)]*\\)+");
////		Matcher m = p.matcher(clearDescription);
////		String s = m.replaceAll("");
//		
////		System.out.println(Pattern.matches("\\([^\\)]*\\?+[^\\)]*\\)", "(Italian: Repubblica Italiana [re?pubblika ita?lja?na])"));
////		System.out.println("RESULT: " + "ab".replaceAll("[^b]*b", ""));
////		System.out.println("RESULT: " + "Italy (Italian: Italia [i?ta?lja] ( listen)), officially the Italian Republic (Italian: Repubblica Italiana [re?pubblika ita?lja?na]), is a sovereign state in Europe. Located in the heart of the Mediterranean Sea, Italy shares open land borders with France, Switzerland, Austria, Slovenia, San Marino and Vatican City. Italy covers an area of 301,340 km2 (116,350 sq mi) and has a largely temperate seasonal and Mediterranean climate. With around 61 million inhabitants, it is the fourth-most populous EU member state and the most populous in southern Europe.Due to its central geographic location in Europe and the Mediterranean, Italy has historically been home to a myriad of peoples and cultures. In addition to the various ancient Italian tribes and Italic peoples dispersed throughout the Italian Peninsula and insular Italy, beginning from the classical era, Phoenicians, Carthaginians and Greeks established settlements in the south of Italy, with Etruscans and Celts inhabiting the centre and the north of Italy respectively. The Italic tribe known as the Latins formed the Roman Kingdom in the 8th century BC, which eventually became a republic that conquered and assimilated its neighbours. In the first century BC, the Roman Empire emerged as the dominant power in the Mediterranean Basin and became the leading cultural, political and religious centre of Western civilisation. The legacy of the Roman Empire is widespread and can be observed in the global distribution of civilian law, republican governments, Christianity and the Latin script.During the Early Middle Ages, Italy endured sociopolitical collapse and barbarian invasions, but by the 11th century, numerous rival city-states and maritime republics, mainly in the northern and central regions of Italy, rose to great prosperity through shipping, commerce and banking, laying the groundwork for modern capitalism. These mostly independent statelets served as Europe's main trading hubs with Asia and the Near East, often enjoying a greater degree of democracy than the larger feudal monarchies that were consolidating throughout Europe; however, part of central Italy was under the control of the theocratic Papal States, while Southern Italy remained largely feudal until the 19th century, partially as a result of a succession of Byzantine, Arab, Norman, Angevin and Spanish conquests of the region.The Renaissance began in Italy and spread to the rest of Europe, bringing a renewed interest in humanism, science, exploration and art. Italian culture flourished, producing famous scholars, artists and polymaths such as Michelangelo, Leonardo da Vinci, Raphael, Galileo and Machiavelli. During the Middle Ages, Italian explorers such as Marco Polo, Christopher Columbus, Amerigo Vespucci, John Cabot and Giovanni da Verrazzano discovered new routes to the Far East and the New World, helping to usher in the European Age of Discovery. Nevertheless, Italy's commercial and political power significantly waned with the opening of trade routes that bypassed the Mediterranean. Centuries of infighting between the Italian city-states, such the Italian Wars of the 15th and 16th centuries, left the region fragmented and susceptible to conquest by European powers such as France, Spain and Austria.By the mid-19th century, rising Italian nationalism and calls for independence from foreign control led to a period of revolutionary political upheaval. After centuries of foreign domination and political division, Italy was almost entirely unified in 1871, establishing the Kingdom of Italy as a great power. From the late 19th century to the early 20th century, Italy rapidly industrialised, namely in the north, and acquired a colonial empire, while the south remained largely impoverished and excluded from industrialisation, fuelling a large and influential diaspora. Despite being one of the main victors in World War I, Italy entered a period of economic crisis and social turmoil, leading to the rise of a fascist dictatorship in 1922. Participation in World War II on the Axis side ended in military defeat, economic destruction and the Italian Civil War. Following the liberation of Italy and the rise of the resistance, the country abolished the monarchy, reinstated democracy, enjoyed a prolonged economic boom and, despite periods of sociopolitical turmoil, became a major advanced country.Today, Italy is considered to be one of the world's most culturally and economically developed countries, with the Italian economy ranking eighth largest in the world and third in the Eurozone. As an advanced economy, the country has the sixth-largest worldwide national wealth, and it is ranked third for its central bank gold reserve. Italy has a very high level of human development, and it stands among the top countries for life expectancy. The country plays a prominent role in regional and global economic, military, cultural and diplomatic affairs, and it is both a regional power and a great power. Italy is a founding and leading member of the European Union and a member of numerous international institutions, including the UN, NATO, the OECD, the OSCE, the WTO, the G7, the G20, the Union for the Mediterranean, the Council of Europe, Uniting for Consensus, the Schengen Area and many more. As a reflection of its cultural wealth, Italy is home to 54 World Heritage Sites, the most in the world, and is the fifth-most visited country.".replaceAll("\\([^\\)]*\\?+[^\\)]*\\)+", ""));
//		return description;
//	}

//	public static void main(String[] args) throws IOException {
//		(new WikipediaCountryWrapper()).extractData(null);
//	}

}
